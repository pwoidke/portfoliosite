
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<title>Paul Woidke - Tic Tac Toe</title> 
<script type="text/javascript"> 
 
//**********************Standard Functions*****************************

function findOffset(obj) {
    var curX = 0;
    var curY = 0;
    if (obj.offsetParent) {   //if the browser supports offsetParent then we can use it
        do {
            curX += obj.offsetLeft;  //get left position of the obj and add it to the var.
            curY += obj.offsetTop;   //gets top position and add it to the var.
        } while (obj = obj.offsetParent);  // keep doing this until 
        
        return {x:curX, y:curY};  //this is a function that returns two values
	}
}
 
//************************Initialization*****************************
 
var canvas, ctx;
var boardMoves=new Array("None","None","None","None","None","None","None","None","None");
var winCount = 0;
var loseCount = 0;
var turnCount = 0;
	
function init(){
    canvas = document.getElementById('myCanvas');
    ctx = canvas.getContext('2d');
	
	drawBoard();
	
    canvas.addEventListener('click', doClick, false);
}	

function drawBoard() {
	ctx.fillRect(150,0,25,500);
	ctx.fillRect(325,0,25,500);
	ctx.fillRect(0,150,500,25);
	ctx.fillRect(0,325,500,25);
	updateWinLoss();
}

//**********************Game Functions*****************************

function drawX(xPos, yPos) {
	if(xPos==1)
		xPos = 25;
	if(yPos==1)
		yPos = 166;
	if(xPos==2)
		xPos = 200;
	if(yPos==2)
		yPos = 333;
	if(xPos==3)
		xPos = 375;
	if(yPos==3)
		yPos = 510;
	
	ctx.fillStyle    = '#000';
	ctx.font         = 'bold 150px sans-serif';
	ctx.textBaseline = 'bottom';
	ctx.fillText  ('X', xPos, yPos);
}

function moveX(moveX, moveY) {
	var checkSpace;
	
	if((moveX==1) && (moveY==1))
		checkSpace = 0;
	if((moveX==2) && (moveY==1))
		checkSpace = 1;
	if((moveX==3) && (moveY==1))
		checkSpace = 2;
	if((moveX==1) && (moveY==2))
		checkSpace = 3;
	if((moveX==2) && (moveY==2))
		checkSpace = 4;
	if((moveX==3) && (moveY==2))
		checkSpace = 5;
	if((moveX==1) && (moveY==3))
		checkSpace = 6;
	if((moveX==2) && (moveY==3))
		checkSpace = 7;
	if((moveX==3) && (moveY==3))
		checkSpace = 8;
	
	if(boardMoves[checkSpace] == "None"){
		boardMoves[checkSpace] = "X";
		drawX(moveX, moveY);
	}
	else
		alert("Space already taken");
		
	turnCount++;
}

function drawO(xPos, yPos) {
	if(xPos==1)
		xPos = 25;
	if(yPos==1)
		yPos = 166;
	if(xPos==2)
		xPos = 200;
	if(yPos==2)
		yPos = 333;
	if(xPos==3)
		xPos = 375;
	if(yPos==3)
		yPos = 510;
	
	ctx.fillStyle    = '#000';
	ctx.font         = 'bold 150px sans-serif';
	ctx.textBaseline = 'bottom';
	ctx.fillText  ('O', xPos, yPos);
}

function moveO() {
	var checkSpace = -1;
	var moveX, moveY;

	while(checkSpace == -1){
		moveX=(Math.floor(Math.random()*3) + 1);
		moveY=(Math.floor(Math.random()*3) + 1);

		if((moveX==1) && (moveY==1))
			checkSpace = 0;
		if((moveX==2) && (moveY==1))
			checkSpace = 1;
		if((moveX==3) && (moveY==1))
			checkSpace = 2;
		if((moveX==1) && (moveY==2))
			checkSpace = 3;
		if((moveX==2) && (moveY==2))
			checkSpace = 4;
		if((moveX==3) && (moveY==2))
			checkSpace = 5;
		if((moveX==1) && (moveY==3))
			checkSpace = 6;
		if((moveX==2) && (moveY==3))
			checkSpace = 7;
		if((moveX==3) && (moveY==3))
			checkSpace = 8;
		if(boardMoves[checkSpace] != "None")
			checkSpace = -1;
	}
	
	boardMoves[checkSpace] = "O";
	drawO(moveX, moveY);
	turnCount++;
}

function checkForWin(){
	if(	(boardMoves[0] == "X") && (boardMoves[1] == "X") && (boardMoves[2] == "X") ||
		(boardMoves[3] == "X") && (boardMoves[4] == "X") && (boardMoves[5] == "X") ||
		(boardMoves[6] == "X") && (boardMoves[7] == "X") && (boardMoves[8] == "X") ||
		(boardMoves[0] == "X") && (boardMoves[3] == "X") && (boardMoves[6] == "X") ||
		(boardMoves[1] == "X") && (boardMoves[4] == "X") && (boardMoves[7] == "X") ||
		(boardMoves[2] == "X") && (boardMoves[5] == "X") && (boardMoves[8] == "X") ||
		(boardMoves[0] == "X") && (boardMoves[4] == "X") && (boardMoves[8] == "X") ||
		(boardMoves[2] == "X") && (boardMoves[4] == "X") && (boardMoves[6] == "X") ){
		alert("You win!");
		winCount++;
		newGame();
	}
	else if((boardMoves[0] == "O") && (boardMoves[1] == "O") && (boardMoves[2] == "O") ||
		(boardMoves[3] == "O") && (boardMoves[4] == "O") && (boardMoves[5] == "O") ||
		(boardMoves[6] == "O") && (boardMoves[7] == "O") && (boardMoves[8] == "O") ||
		(boardMoves[0] == "O") && (boardMoves[3] == "O") && (boardMoves[6] == "O") ||
		(boardMoves[1] == "O") && (boardMoves[4] == "O") && (boardMoves[7] == "O") ||
		(boardMoves[2] == "O") && (boardMoves[5] == "O") && (boardMoves[8] == "O") ||
		(boardMoves[0] == "O") && (boardMoves[4] == "O") && (boardMoves[8] == "O") ||
		(boardMoves[2] == "O") && (boardMoves[4] == "O") && (boardMoves[6] == "O") ){
		alert("You lose!");
		loseCount++;
		newGame();
	}
	else if(turnCount == 9){
		alert("Draw!");
		newGame();
	}
}

function updateWinLoss(){
	ctx.fillStyle    = '#000';
	ctx.font         = 'bold 55px sans-serif';
	ctx.textBaseline = 'bottom';
	ctx.fillText  ('Wins: ' + winCount, 0, 570);
	ctx.fillText  ('Losses: ' + loseCount, 220, 570);
}

function newGame(){
	ctx.clearRect(0, 0, canvas.width, canvas.height);
	drawBoard();
	boardMoves=new Array("None","None","None","None","None","None","None","None","None");
	turnCount = 0;
}

//***********************Mouse click*******************************

function doClick(e) { 
	var offset = findOffset(canvas);   //get the offset of the canvas relative to the page    
    var posX = e.pageX - offset.x;     //find the x position of the mouse
    var posY = e.pageY - offset.y;     //find the y position of the mouse

    if ((posX >= 0) && (posX < 150) && (posY >= 0) && (posY < 150)) {
		moveX(1, 1);
		checkForWin();
		moveO();
	} else if ((posX >= 175) && (posX < 325) && (posY >= 0) && (posY < 150)) {
		moveX(2, 1);
		checkForWin();
		moveO();
	} else if ((posX >= 350) && (posX < 500) && (posY >= 0) && (posY < 150)) {
		moveX(3, 1);
		checkForWin();
		moveO();
	} else if ((posX >= 0) && (posX < 150) && (posY >= 175) && (posY < 325)) {
		moveX(1, 2);
		checkForWin();
		moveO();
	} else if ((posX >= 175) && (posX < 325) && (posY >= 175) && (posY < 325)) {
		moveX(2, 2);
		checkForWin();
		moveO();
	} else if ((posX >= 350) && (posX < 500) && (posY >= 175) && (posY < 325)) {
		moveX(3, 2);
		checkForWin();
		moveO();
	} else if ((posX >= 0) && (posX < 150) && (posY >= 350) && (posY < 500)) {
		moveX(1, 3);
		checkForWin();
		moveO();
	} else if ((posX >= 175) && (posX < 325) && (posY >= 350) && (posY < 500)) {
		moveX(2, 3);
		checkForWin();
		moveO();
	} else if ((posX >= 350) && (posX < 500) && (posY >= 350) && (posY < 500)) {
		moveX(3, 3);
		checkForWin();
		moveO();
	}
	
	checkForWin();
}
  
</script> 
</head> 
<body onload='init()'> 
<canvas id="myCanvas" width="500px" height="600px"></canvas> 
</body> 
</html> 